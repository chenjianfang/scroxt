!function(t){function e(r){if(i[r])return i[r].exports;var n=i[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,r){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s=13)}([function(t,e,i){"use strict";function r(t){return!(!t||!t.nodeType)&&1===t.nodeType}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();e.default=r},function(t,e,i){"use strict";function r(t,e){return Object(n.default)(t)?window.getComputedStyle(t,null).getPropertyValue(e):"string"==typeof t&&document.querySelector(t)?window.getComputedStyle(document.querySelector(t),null).getPropertyValue(e):void 0}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var n=i(0)},function(t,e,i){"use strict";function r(t){var e=document.createElement("style"),i=document.head||document.getElementsByTagName("head")[0];if(e.type="text/css",e.styleSheet){var r=function(){try{e.styleSheet.cssText=t}catch(t){console.error(t)}};e.styleSheet.disabled?setTimeout(r,10):r()}else{var n=document.createTextNode(t);e.appendChild(n)}i.appendChild(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.clearTimeout}();e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){t.target,t.data,t.speed;this.options={target:"",data:[],speed:5},this.extendOpt(arguments[0]),this.targetElement=document.querySelector(this.options.target)}return t.prototype.extendOpt=function(t){var e=this;for(var i in t)t.hasOwnProperty(i)&&(e.options[i]=t[i])},t.prototype.createElement=function(t){void 0===t&&(t="");var e=this.targetElement,i=[],r=document.querySelector(".scroxt-wrapper");r||(r=document.createElement("div"),r.className="scroxt-wrapper",e.appendChild(r));for(var n=0,o=this.options.data.length;n<o;n++){var a=document.createElement("div");a.className=t;var s=document.createTextNode(this.options.data[n]);a.appendChild(s),r.appendChild(a),i.push(a)}return i},t}();e.default=r},function(t,e,i){"use strict";function r(t){if(Object(n.default)(t))t.parentNode.removeChild(t);else if("string"==typeof t&&document.querySelector(t)){var e=document.querySelector(t);e.parentNode.removeChild(e)}else console.error("参数错误")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var n=i(0)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this.events={}}return t.prototype.on=function(t,e){this.events[t]?this.events[t].push(e):this.events[t]=[e]},t.prototype.off=function(t,e){this.events[t].splice(this.events[t].indexOf(e),1)},t.prototype.empty=function(t){this.events[t]=[]},t.prototype.triggle=function(t){this.events[t].forEach(function(t){t()})},t}();e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),n=i(4),o=i(2),a=i(7),s=i(3),c=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),l=function(t){function e(e){var i=e.video,r=e.dataTime,n=t.call(this)||this;return n.currentTime=0,n.sumTime=0,n.videoEnd=!1,n.barrageWrap=[],n.readyShowBarrage=[],n.staticBarrageST=null,n.runST=0,n.video=i,n.scroxtVideo=document.querySelector(n.video),n.dataTime=n.quickSort(r),console.log(n.dataTime),n.tempDataTime=JSON.parse(JSON.stringify(n.dataTime)),n.lineHeight=28,n.videoWidth=parseInt(Object(o.default)(n.video,"width")),n.MAX_LINE=~~(parseInt(Object(o.default)(n.video,"height"))/n.lineHeight),n.MAX_NUM=50,n.distance=-5,n.colorFont=["#ffff38","#c80115","#189add"],n.createStyle(),n.startRun(),n}return c(e,t),e.prototype.quickSort=function(t){if(t.length<=1)return t;for(var e=t.splice(Math.floor(t.length/2),1)[0],i=[],r=[],n=0,o=t.length;n<o;n++)t[n].time<e.time?i.push(t[n]):r.push(t[n]);return this.quickSort(i).concat(e,this.quickSort(r))},e.prototype.createStyle=function(){Object(s.default)('\n            .scroxt-video-barrage{\n                position: relative;\n                width: 600px;\n                height: 600px;\n                margin: 0 auto;\n                overflow: hidden;\n            }\n            .scroxt-video{\n                display: block;\n                width: 100%;\n                height: auto;\n                cursor: pointer;\n            }\n            .multi-barrage-line{\n              position: absolute;\n              display: inline-block;\n              top: 0;\n              user-select:none;\n              white-space: pre;\n              color: #fff;\n              font-size: 25px;\n              font-family:SimHei, "Microsoft JhengHei", Arial, Helvetica, sans-serif;\n              font-weight:bold;\n              line-height: 1.125;\n              text-shadow:rgb(0, 0, 0) 1px 0px 1px, rgb(0, 0, 0) 0px 1px 1px, rgb(0, 0, 0) 0px -1px 1px, rgb(0, 0, 0) -1px 0px 1px;\n              transition:-webkit-transform 0s linear;\n              z-index: 1;\n              pointer-events: none;\n            }\n            .static-barrage-line{\n              position: absolute;\n              left: 50%;\n              transform:translateX(-50%);\n              -webkit-transform:translateX(-50%);\n              top: 0;\n              z-index: 2;\n            }\n        ')},e.prototype.startRun=function(){var t=this.scroxtVideo.className;this.scroxtVideo.className=t.indexOf("scroxt-video")>-1?t:t+" scroxt-video",this.playEvent()},e.prototype.restart=function(){this.sumTime=0,this.tempDataTime=JSON.parse(JSON.stringify(this.dataTime))},e.prototype.playEvent=function(){var t=this;4==this.scroxtVideo.readyState?t.videoClickEvent():(this.scroxtVideo.addEventListener("canplaythrough",function(){t.videoClickEvent()},!1),this.scroxtVideo.load())},e.prototype.videoClickEvent=function(){var t=this;t.scroxtVideo.addEventListener("click",function(e){e.stopImmediatePropagation(),t.videoEnd&&(t.videoEnd=!1,t.restart()),t.videoStatusMethod()},!1),t.scroxtVideo.addEventListener("ended",function(){t.videoEnd=!0,t.readyShowBarrage=[]})},e.prototype.videoStatusMethod=function(){this.scroxtVideo.paused?(this.currentTime=+new Date,this.scroxtVideo.play(),this.intervalRun()):(this.scroxtVideo.pause(),this.intervalStop())},e.prototype.timeUpdate=function(){this.sumTime+=(+new Date-this.currentTime)/1e3,this.currentTime=+new Date,this.distribution(this.sumTime)},e.prototype.distribution=function(t){for(var e=this.tempDataTime.length;0!==e&&this.tempDataTime[0].time<t;)this.readyShowBarrage.push(this.tempDataTime[0].data),this.tempDataTime.shift(),e=this.tempDataTime.length},e.prototype.createBarrage=function(){var t=this.readyShowBarrage.length;if(t&&!(this.barrageWrap.length>this.MAX_NUM))for(var e=0;e<t;e++){if(e>this.MAX_LINE){t>20&&!this.staticBarrageST&&this.createStaticBarrage(this.readyShowBarrage.splice(0,this.MAX_LINE));break}var i=e%this.MAX_LINE,r=document.querySelectorAll("[data-line='"+i+"']"),n=r.length,o=void 0;if(n>0){o=r[n-1];var a=+o.getAttribute("data-width"),s=+o.getAttribute("data-move");if(Math.abs(s)+a>this.videoWidth)continue}var c=this.readyShowBarrage.shift(),l=Math.floor(1e3*Math.random())+ +new Date+e,h=e%2==0?10:0,p=document.createElement("div");p.className="multi-barrage-line";var d=document.createTextNode(""+c);p.appendChild(d),this.scroxtVideo.parentNode.appendChild(p);var u=parseInt(window.getComputedStyle(p,null).getPropertyValue("width")),f=u/600>=.5?.5:u/600,m="#fff";.5===f&&(m=this.colorFont[~~(Math.random()*this.colorFont.length)]),this.barrageWrap.push({element:p,scroxt:l,line:i,move:this.videoWidth+h+10,width:u,distance:f,color:m})}},e.prototype.createStaticBarrage=function(t){for(var e=this,i=0,r=t.length;i<r;i++)!function(i,r){var n=i%e.MAX_LINE,o=document.createElement("div");o.className="multi-barrage-line static-barrage-line",o.style.top=n*e.lineHeight+"px",o.style.color=e.colorFont[~~(Math.random()*e.colorFont.length)];var a=document.createTextNode(""+t[i]);o.appendChild(a),e.staticBarrageST=setTimeout(function(){this.staticBarrageST=null,this.scroxtVideo.parentNode.removeChild(o)}.bind(e),3e3),e.scroxtVideo.parentNode.appendChild(o)}(i)},e.prototype.moveLine=function(){for(var t=0;t<this.barrageWrap.length;t++){var e=this.barrageWrap[t],i=e.element,r=(e.scroxt,e.line),n=e.move,o=e.width,a=e.distance,s=e.color;if(n<=-o){this.barrageWrap.splice(t,1),t--;var c=i.parentNode;c&&c.removeChild(i)}else{var l=n+this.distance*a+this.distance/10;this.barrageWrap[t].move=l,i.style.cssText="color:"+s+";transform:translate3d("+l+"px,"+r*this.lineHeight+"px,0);"}}},e.prototype.intervalRun=function(){this.runST=Object(r.default)(function(){this.createBarrage(),this.moveLine(),this.scroxtVideo.paused||this.timeUpdate(),this.intervalRun()}.bind(this))},e.prototype.intervalStop=function(){Object(n.default)(this.runST)},e}(a.default);e.default=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(5),n=i(1),o=i(2),a=i(6),s=i(3),c=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),l=function(t){function e(e){var i=t.call(this,e)||this;return i.sumWidth=0,i.scroxtGap=10,i.distance=0,i.targetWidth=0,i.divWrapElementWidth=0,i.targetElementBorderWidth=0,i.createStyle(),i.init(),i}return c(e,t),e.prototype.createStyle=function(){Object(s.default)('\n            .scroxt-wrapper{\n              width: 1000px;\n            }\n            .scroxt-wrapper::after{\n                display: block;\n                content: "";\n                clear: both;\n            }\n            .scroxt-horizontal{\n                float: left;\n                margin-right: 10px;\n            }\n        ')},e.prototype.init=function(){this.targetWidth=parseFloat(Object(o.default)(this.targetElement,"width")),this.targetElementBorderWidth=parseFloat(Object(o.default)(this.targetElement,"border-width")),this.createHorizontal(),this.STRun()},e.prototype.createHorizontal=function(){Object(a.default)(".scroxt-wrapper");var t=this.createElement("scroxt-horizontal"),e=this.createElement("scroxt-horizontal"),i=t.concat(e);this.divWrapElementWidth=this.computeWidth(i)+i.length*this.scroxtGap;var r=document.querySelector(".scroxt-wrapper");return r.style.width=this.divWrapElementWidth+"px",r},e.prototype.computeWidth=function(t){for(var e=0,i=0,r=t.length;i<r;i++)e+=Math.ceil(+Object(o.default)(t[i],"width").replace("px",""));return e},e.prototype.STRun=function(){this.STMove(),Object(n.default)(function(){this.STRun()}.bind(this))},e.prototype.STMove=function(){var t=document.querySelector(".scroxt-wrapper"),e=t.getBoundingClientRect(),i=e.left+(e.right-e.left)/2,r=this.targetElement.getBoundingClientRect();if(this.options.speed<0){var n=r.left+this.targetElementBorderWidth;i+.1*this.options.speed<=n&&(this.distance=0,t=this.createHorizontal(),t.style.left="0px",t.style.marginLeft="0px")}else{var o=r.right-2*this.targetElementBorderWidth;i+.1*this.options.speed>=o&&(this.distance=-this.divWrapElementWidth+this.targetWidth,t=this.createHorizontal(),t.style.right="0px",t.style.marginRight="0px")}t.style.transform="translate3d("+this.distance+"px, 0px, 0px)",t.style.webkitTransform="translate3d("+this.distance+"px, 0px, 0px)",this.distance+=.1*this.options.speed},e}(r.default);e.default=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(2),n=i(3),o=i(1),a=i(4),s=function(){function t(t){var e=t.target,i=t.strongLock,n=void 0!==i&&i;this.barrage=[],this.selfBarrage=[],this.barrageWrap={},this.MAX_LINE=4,this.lineHeight=28,this.sumLine=0,this.lineGap=10,this.runST=0,this.targetElement=document.querySelector(e),this.strongLock=n,this.TARGET_WIDTH=parseInt(Object(r.default)(this.targetElement,"width")),this.MAX_LINE=~~(parseInt(Object(r.default)(this.targetElement,"height"))/this.lineHeight),this.gear=-5,this.LINE_LIMIT=300,this.startRun()}return t.prototype.startRun=function(){this.createStyle(),this.intervalRun()},t.prototype.createStyle=function(){Object(n.default)('\n            .multi-barrage-line{\n              position: absolute;\n              display: inline-block;\n              top: 0;\n              user-select:none;\n              white-space: pre;\n              color: #fff;\n              font-size: 25px;\n              font-family:SimHei, "Microsoft JhengHei", Arial, Helvetica, sans-serif;\n              font-weight:bold;\n              line-height: 1.125;\n              text-shadow:rgb(0, 0, 0) 1px 0px 1px, rgb(0, 0, 0) 0px 1px 1px, rgb(0, 0, 0) 0px -1px 1px, rgb(0, 0, 0) -1px 0px 1px;\n              transition:-webkit-transform 0s linear;\n              z-index: 1;\n              pointer-events: none;\n            }\n        ')},t.prototype.addBarrage=function(t,e){void 0===e&&(e=!1),e?this.selfBarrage.push(t):this.barrage.push(t)},t.prototype.createBarrage=function(){for(var t=0,e=this.barrage.length;e>0&&t<this.MAX_LINE;t++){var i=void 0,r=t%this.MAX_LINE;if(this.selfBarrage.length>0)i=this.selfBarrage.shift();else{if(this.strongLock&&this.sumLine>65){this.barrage=[];break}if(this.barrageWrap[r]){var n=this.barrageWrap[r].length;if(n>0){var o=this.barrageWrap[r][n-1];if(o.move+o.width>this.TARGET_WIDTH-this.lineGap)continue}}i=this.barrage.shift(),e--}this.generateBarrage(r,i)}},t.prototype.generateBarrage=function(t,e){var i=document.createElement("div");i.className="multi-barrage-line";var n=document.createTextNode(e);i.appendChild(n),i.style.opacity="0",this.targetElement.appendChild(i);var o=parseInt(Object(r.default)(i,"width")),a=o/600>=.5?.5:o/600;this.barrageWrap[t]?this.barrageWrap[t].push({element:i,line:t,move:this.TARGET_WIDTH,width:o,speed:a}):this.barrageWrap[t]=[{element:i,line:t,move:this.TARGET_WIDTH,width:o,speed:a}]},t.prototype.moveLine=function(){this.sumLine=0;for(var t in this.barrageWrap){var e=this.barrageWrap[t];this.sumLine+=e.length;for(var i=0;i<e.length;i++){var r=e[i],n=r.element,o=r.line,a=r.move,s=r.width,c=r.speed;if(a<=-s)e.splice(i,1),i--,this.targetElement.removeChild(n);else{var l=a+this.gear*c+this.gear/10;r.move=l,n.style.cssText="transform:translate3d("+l+"px,"+o*this.lineHeight+'px,0);opacity="1";'}}}},t.prototype.intervalRun=function(){this.runST=Object(o.default)(function(){this.moveLine(),this.createBarrage(),this.intervalRun()}.bind(this))},t.prototype.intervalStop=function(){Object(a.default)(this.runST)},t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(5),n=i(1),o=i(2),a=i(6),s=i(3),c=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),l=function(t){function e(e){var i=t.call(this,e)||this;return i.targetHeight=0,i.divWrapElementHeight=0,i.distance=0,i.targetHeight=parseFloat(Object(o.default)(i.targetElement,"height")),i.createStyle(),i.startRun(),i}return c(e,t),e.prototype.createStyle=function(){Object(s.default)("\n    \t\t\n    \t")},e.prototype.startRun=function(){this.divWrapElementHeight=this.createVertical(),this.STRun()},e.prototype.createVertical=function(){Object(a.default)(".scroxt-wrapper");var t=this.createElement("scroxt-vertical"),e=this.createElement("scroxt-vertical");return this.divWrapElement=document.querySelector(".scroxt-wrapper"),this.computeHeight(t.concat(e))},e.prototype.computeHeight=function(t){for(var e=0,i=0,r=t.length;i<r;i++)e+=Math.ceil(+Object(o.default)(t[i],"height").replace("px",""));return e},e.prototype.STRun=function(){this.STMove(),Object(n.default)(function(){this.STRun()}.bind(this))},e.prototype.STMove=function(){this.options.speed<0?this.distance<=-this.divWrapElementHeight/2&&(this.createVertical(),this.distance=0):this.distance>=this.targetHeight-this.divWrapElementHeight/2&&(this.createVertical(),this.distance=this.targetHeight-this.divWrapElementHeight),this.divWrapElement.style.transform="translate3d(0px, "+this.distance+"px, 0px)",this.divWrapElement.style.webkitTransform="translate3d(0px, "+this.distance+"px, 0px)",this.distance+=.1*this.options.speed},e}(r.default);e.default=l},,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(9),n=i(11),o=i(8),a=i(10),s={};s.Horizontal=r.default,s.Vertical=n.default,s.Barrage=o.default,s.Live=a.default,window.scroxt=s}]);